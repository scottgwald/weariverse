<html style="width:100%; height:100%; overflow:hidden">
<body style="width:100%; height:100%; overflow:hidden; margin:0">
  <canvas id="myCanvas" width="640" height="360"></canvas>
  <img id="myImage" src="sagrada0.jpg" width="640" height="360" type="hidden"/>
<script>

var thisImage = 'sagrada0.jpg',
    // TODO don't hard code this
    imageWidth = 640,
    imageHeight = 360;
    // img = new Image();
// img.src = thisImage;

function photo(data) {
    WS.say("Got picture callback johnson citgo no.");
    console.log("got picture callback johnson citgo no.");
    WS.wake();
    WS.activityCreate();
    // document.getElementById("myImage").setAttribute('src', 'data:image/jpeg;base64,' + data);
    var img = document.getElementById("myImage");
    // img.src = 'data:image/jpeg;base64,' + data;
    sourceX = 0;
    sourceY = 0;
    destX = 0;
    destY = 0;
    destWidth = 640;
    destHeight = 360;
    canvas = document.getElementById('myCanvas');
	context = canvas.getContext('2d');
    try {
        context.drawImage(img, sourceX, sourceY, imageWidth, imageHeight, destX, destY, destWidth, destHeight);
        console.log("Called context.drawImage");
    } catch(err) {
    	console.log(err);
        //paramLog();
    }                
    // context.drawImage(img, 0, 0, 640, 360);
}

function main() {
    if (WS.scriptVersion(0)) return;
    WS.cameraPhoto('photo');
}
window.onload = main;
</script>
</body>
</html>
